<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Experiments - 2&nbsp; XGBoost classification model for pairwise ranking</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.32.0.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>


  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./xgboost-pairwise-ranking.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">XGBoost classification model for pairwise ranking</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Experiments</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./xgboost-pairwise-ranking.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">XGBoost classification model for pairwise ranking</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#objective" id="toc-objective" class="nav-link active" data-scroll-target="#objective"><span class="header-section-number">2.1</span> Objective</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background"><span class="header-section-number">2.2</span> Background</a></li>
  <li><a href="#hypothesis" id="toc-hypothesis" class="nav-link" data-scroll-target="#hypothesis"><span class="header-section-number">2.3</span> Hypothesis</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology"><span class="header-section-number">2.4</span> Methodology</a>
  <ul class="collapse">
  <li><a href="#tools-and-materials" id="toc-tools-and-materials" class="nav-link" data-scroll-target="#tools-and-materials"><span class="header-section-number">2.4.1</span> Tools and Materials</a></li>
  <li><a href="#experimental-design" id="toc-experimental-design" class="nav-link" data-scroll-target="#experimental-design"><span class="header-section-number">2.4.2</span> Experimental Design</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables"><span class="header-section-number">2.4.3</span> Variables</a></li>
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection"><span class="header-section-number">2.4.4</span> Data Collection</a></li>
  <li><a href="#sample-size-and-selection" id="toc-sample-size-and-selection" class="nav-link" data-scroll-target="#sample-size-and-selection"><span class="header-section-number">2.4.5</span> Sample Size and Selection</a></li>
  <li><a href="#experimental-procedure" id="toc-experimental-procedure" class="nav-link" data-scroll-target="#experimental-procedure"><span class="header-section-number">2.4.6</span> Experimental Procedure</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">2.5</span> Results</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion"><span class="header-section-number">2.6</span> Discussion</a></li>
  <li><a href="#timeline" id="toc-timeline" class="nav-link" data-scroll-target="#timeline"><span class="header-section-number">2.7</span> Timeline</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">2.8</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">XGBoost classification model for pairwise ranking</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="objective" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="objective"><span class="header-section-number">2.1</span> Objective</h2>
<p><strong>Objective</strong>: <em>Testing the performance of an XGBoost model trained for ranking pairwise schedules.</em></p>
</section>
<section id="background" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="background"><span class="header-section-number">2.2</span> Background</h2>
<p><strong>Background Information</strong>: <em>To find optimal solutions for appointment scheduling problems one approach is to create local search neighborhoods and evaluate the schedules in that set. A better search method either (1) - creates smaller search neighborhoods or (2) - evaluates faster. In this experiment we develop a Machine Learning model using XGBoost that can evaluate two neighboring schedules and rank them according to preference.</em></p>
</section>
<section id="hypothesis" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="hypothesis"><span class="header-section-number">2.3</span> Hypothesis</h2>
<p><strong>Hypothesis</strong>: <em>An XGBoost ranking model outperforms simple evaluation of each individual element of the pair.</em></p>
</section>
<section id="methodology" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="methodology"><span class="header-section-number">2.4</span> Methodology</h2>
<section id="tools-and-materials" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="tools-and-materials"><span class="header-section-number">2.4.1</span> Tools and Materials</h3>
<p><strong>Tools and Materials</strong>: <em>We use packages from <a href="https://scikit-learn.org/stable/index.html">Scikit-learn</a> to prepare training data and evaluate the model and the <code>XGBClassifier</code> interface from the <a href="https://xgboost.readthedocs.io/en/latest/index.html">XGBoost</a> library.</em></p>
<div id="67b408f7" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split, cross_val_score, StratifiedKFold, GridSearchCV</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.base <span class="im">import</span> clone</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xgboost <span class="im">as</span> xgb</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> xgboost.callback <span class="im">import</span> TrainingCallback</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="experimental-design" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="experimental-design"><span class="header-section-number">2.4.2</span> Experimental Design</h3>
<p><strong>Design</strong>: <em>To compare an XGBoost Machine Learning model with a simple evaluation of each individual element of the pair, we will use a pairwise ranking approach. The objective is to rank two neighboring schedules according to preference.</em></p>
<p><em>We will create a random set of pairs of neighboring schedules with</em> <span class="math inline">\(N = 12\)</span> patients and <span class="math inline">\(\ T = 18\)</span> intervals of length <span class="math inline">\(d = 5\)</span>.</p>
<p><em>A neighborhood consists of all schedules that differ by one patient only. Eg: ([2,1,1], [1,1,2]) are neighbors and ([2,1,1], [1,0,3]) are not.</em></p>
<p><em>Service times will have a discrete distribution. The probability of a scheduled patient not showing up will be</em> <span class="math inline">\(q = 0.20\)</span>.</p>
<p><em>The objective function will be the total waiting time of all patients. The model will be trained to predict which of the two neighboring schedules has the lowest objective value. The prediction time will be recorded. Then the same schedules will be evaluated by computing the objective value and then ranked.</em></p>
<div id="80b1a092" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> [<span class="fl">0.0</span>, <span class="fl">0.27</span>, <span class="fl">0.28</span>, <span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fl">0.1</span>]</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>q <span class="op">=</span> <span class="fl">0.20</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>num_schedules <span class="op">=</span> <span class="dv">20000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="variables" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="variables"><span class="header-section-number">2.4.3</span> Variables</h3>
<ul>
<li><strong>Independent Variables</strong>: <em>A list of tuples with pairs of neighboring schedules.</em></li>
<li><strong>Dependent Variables</strong>: <em>A list with rankings for each tuple of pairwise schedules. Eg: If the rank for ([2,1,1], [1,1,2]) is 1 this means that the schedule with index 1 ([1,1,2]) has the lowest objective value.</em></li>
</ul>
</section>
<section id="data-collection" class="level3" data-number="2.4.4">
<h3 data-number="2.4.4" class="anchored" data-anchor-id="data-collection"><span class="header-section-number">2.4.4</span> Data Collection</h3>
<p><strong>Data Collection Method</strong>: <em>The data set will be generated using simulation in which random samples will be drawn from the population of all possible schedules. For each sample a random neighboring schedule will be created.</em></p>
</section>
<section id="sample-size-and-selection" class="level3" data-number="2.4.5">
<h3 data-number="2.4.5" class="anchored" data-anchor-id="sample-size-and-selection"><span class="header-section-number">2.4.5</span> Sample Size and Selection</h3>
<p><strong>Sample Size</strong>: <em>The total population size equals</em> <span class="math inline">\({{N + T -1}\choose{N}} \approx\)</span> 52.0 mln. For this experiment we will be using a relatively small sample of 20000 schedules.</p>
<p><strong>Sample Selection</strong>: <em>The samples will be drawn from a lexicographic order of possible schedules in order to accurately reflect the combinatorial nature of the problem and to ensure unbiased sampling from the entire combinatorial space.</em></p>
</section>
<section id="experimental-procedure" class="level3" data-number="2.4.6">
<h3 data-number="2.4.6" class="anchored" data-anchor-id="experimental-procedure"><span class="header-section-number">2.4.6</span> Experimental Procedure</h3>
<p><em>The experiment involves multiple steps, beginning with data preparation and concluding with model evaluation. Each step offers several design options. The diagram below illustrates the sequence of steps and the available choices. We are adhering to the steps highlighted in red.</em></p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    A["Create features"]:::path --&gt;|"option 1"| B["from population"]
    A --&gt;|"option 2"| C["random subset"]:::path
    B --&gt; D["Create pairs"]:::path
    C --&gt; D
    D --&gt;|"option 1"| E["random"]
    D --&gt;|"option 2"| F["neighbors"]:::path
    E --&gt; G["Create labels"]:::path
    F --&gt; G
    G --&gt;|"option 1"| H["objective"]
    G --&gt;|"option 2"| I["ranking"]:::path
    H --&gt; J["Split dataset"]:::path
    I --&gt; J
    J --&gt; K["Train XGBoost"]:::path
    K --&gt; L["Evaluate model"]:::path
    
    classDef path stroke:#f00
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p><strong>Step 1</strong>: <em>Randomly select a subset of schedules.</em></p>
<div id="79d42730" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functions <span class="im">import</span> random_combination_with_replacement</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>schedules <span class="op">=</span> random_combination_with_replacement(T, N, num_schedules)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Sampled: </span><span class="sc">{</span><span class="bu">len</span>(schedules)<span class="sc">}</span><span class="ss"> schedules</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> schedule <span class="kw">in</span> schedules[:<span class="dv">5</span>]:</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Schedule: </span><span class="sc">{</span>schedule<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time.time()</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>data_prep_time <span class="op">=</span> end <span class="op">-</span> start</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Processing time: </span><span class="sc">{</span>data_prep_time<span class="sc">}</span><span class="ss"> seconds</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Total number of combinations: 51895935
Sampled: 20000 schedules

Schedule: [5, 4, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Schedule: [3, 5, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Schedule: [7, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
Schedule: [4, 4, 2, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Schedule: [4, 1, 3, 2, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

Processing time: 0.196990966796875 seconds
</code></pre>
</div>
</div>
<p><strong>Step 2</strong>: <em>Create pairs of neighboring schedules.</em></p>
<div id="f7e92408" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functions <span class="im">import</span> create_neighbors_list</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>neighbors_list <span class="op">=</span> create_neighbors_list(schedules)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> neighbor <span class="kw">in</span> neighbors_list[:<span class="dv">5</span>]:</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Neighbor: </span><span class="sc">{</span>neighbor[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time.time() </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>training_set_feat_time <span class="op">=</span> end <span class="op">-</span> start</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Processing time: </span><span class="sc">{</span>training_set_feat_time<span class="sc">}</span><span class="ss"> seconds</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Neighbor: [5, 4, 0, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Neighbor: [3, 5, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]
Neighbor: [7, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0]
Neighbor: [4, 4, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Neighbor: [3, 1, 3, 2, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0]

Processing time: 0.12521028518676758 seconds
</code></pre>
</div>
</div>
<p><strong>Step 3</strong>: <em>For each schedule in each pair calculate the objective. For each pair save the index of the schedule that has the lowest objective value.</em></p>
<div id="1c6373ff" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functions <span class="im">import</span> calculate_objective</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>objectives_schedule_1 <span class="op">=</span> [calculate_objective(neighbor[<span class="dv">0</span>], s, d, q)[<span class="dv">0</span>] <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors_list]</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>objectives_schedule_2 <span class="op">=</span> [calculate_objective(neighbor[<span class="dv">1</span>], s, d, q)[<span class="dv">0</span>] <span class="cf">for</span> neighbor <span class="kw">in</span> neighbors_list]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time.time()</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>training_set_lab_time <span class="op">=</span> end <span class="op">-</span> start</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>objectives <span class="op">=</span> [[obj, objectives_schedule_2[i]] <span class="cf">for</span> i, obj <span class="kw">in</span> <span class="bu">enumerate</span>(objectives_schedule_1)]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>rankings <span class="op">=</span> [<span class="dv">0</span> <span class="cf">if</span> obj[<span class="dv">0</span>] <span class="op">&lt;</span> obj[<span class="dv">1</span>] <span class="cf">else</span> <span class="dv">1</span> <span class="cf">for</span> obj <span class="kw">in</span> objectives]</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Objectives: </span><span class="sc">{</span>objectives[i]<span class="sc">}</span><span class="ss">, Ranking: </span><span class="sc">{</span>rankings[i]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Processing time: </span><span class="sc">{</span>training_set_lab_time<span class="sc">}</span><span class="ss"> seconds</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Objectives: [58.64260721159582, 57.55604808663027], Ranking: 1
Objectives: [46.193009010950895, 41.67159539988912], Ranking: 1
Objectives: [50.46385196336541, 50.46385196336541], Ranking: 1
Objectives: [58.25420772314158, 50.088120806882976], Ranking: 1
Objectives: [33.711862703157664, 21.615575140770964], Ranking: 1

Processing time: 8.6248939037323 seconds
</code></pre>
</div>
</div>
<p><strong>Step 4</strong>: <em>Create training and test sets.</em></p>
<div id="7bd758c5" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the dataset</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> []</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> neighbors <span class="kw">in</span> neighbors_list:</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    X.append(neighbors[<span class="dv">0</span>] <span class="op">+</span> neighbors[<span class="dv">1</span>])</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> np.array(X)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array(rankings)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the dataset into training and test sets</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Step 5</strong>: <em>Train the XGBoost model.</em></p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[Start] --&gt; B[Initialize StratifiedKFold]
    B --&gt; C[Initialize XGBClassifier]
    C --&gt; D[Set results as empty list]
    D --&gt; E[Loop through each split of cv split]
    E --&gt; F[Get train and test indices]
    F --&gt; G[Split X and y into X_train, X_test, y_train, y_test]
    G --&gt; H[Clone the classifier]
    H --&gt; I[Call fit_and_score function]
    I --&gt; J[Fit the estimator]
    J --&gt; K[Score on training set]
    J --&gt; L[Score on test set]
    K --&gt; M[Return estimator, train_score, test_score]
    L --&gt; M
    M --&gt; N[Append the results]
    N --&gt; E
    E --&gt; O[Loop ends]
    O --&gt; P[Print results]
    P --&gt; Q[End]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div id="6ac25593" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> CustomCallback(TrainingCallback):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, period<span class="op">=</span><span class="dv">10</span>):</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.period <span class="op">=</span> period</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> after_iteration(<span class="va">self</span>, model, epoch, evals_log):</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (epoch <span class="op">+</span> <span class="dv">1</span>) <span class="op">%</span> <span class="va">self</span>.period <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"Epoch </span><span class="sc">{</span>epoch<span class="sc">}</span><span class="ss">, Evaluation log: </span><span class="sc">{</span>evals_log[<span class="st">'validation_0'</span>][<span class="st">'logloss'</span>][epoch]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fit_and_score(estimator, X_train, X_test, y_train, y_test):</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Fit the estimator on the train set and score it on both sets"""</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    estimator.fit(X_train, y_train, eval_set<span class="op">=</span>[(X_test, y_test)], verbose<span class="op">=</span><span class="dv">0</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    train_score <span class="op">=</span> estimator.score(X_train, y_train)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    test_score <span class="op">=</span> estimator.score(X_test, y_test)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> estimator, train_score, test_score</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>cv <span class="op">=</span> StratifiedKFold(n_splits<span class="op">=</span><span class="dv">5</span>, shuffle<span class="op">=</span><span class="va">True</span>, random_state<span class="op">=</span><span class="dv">94</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the XGBClassifier without early stopping here</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">"""Load the best trial parameters from a JSON file."""</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">"best_trial_params.json"</span>, <span class="st">"r"</span>) <span class="im">as</span> f:</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    best_trial_params <span class="op">=</span> json.load(f)</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>clf <span class="op">=</span> xgb.XGBClassifier(</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>    tree_method<span class="op">=</span><span class="st">"hist"</span>,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>    max_depth<span class="op">=</span>best_trial_params[<span class="st">"max_depth"</span>],</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>    min_child_weight<span class="op">=</span>best_trial_params[<span class="st">"min_child_weight"</span>],</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>    gamma<span class="op">=</span>best_trial_params[<span class="st">"gamma"</span>],</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    subsample<span class="op">=</span>best_trial_params[<span class="st">"subsample"</span>],</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>    colsample_bytree<span class="op">=</span>best_trial_params[<span class="st">"colsample_bytree"</span>],</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>    learning_rate<span class="op">=</span>best_trial_params[<span class="st">"learning_rate"</span>],</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>    n_estimators<span class="op">=</span>best_trial_params[<span class="st">"n_estimators"</span>],</span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>    early_stopping_rounds<span class="op">=</span><span class="dv">9</span>,</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    callbacks<span class="op">=</span>[CustomCallback(period<span class="op">=</span><span class="dv">10</span>)]</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co"># clf = xgb.XGBClassifier(</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="co">#     tree_method="hist",</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a><span class="co">#     max_depth=6,</span></span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a><span class="co">#     min_child_weight=1,</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a><span class="co">#     gamma=0.1,</span></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="co">#     subsample=0.8,</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="co">#     colsample_bytree=0.8,</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a><span class="co">#     learning_rate=0.1,</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a><span class="co">#     n_estimators=100,</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a><span class="co">#     early_stopping_rounds=9,</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a><span class="co">#     callbacks=[CustomCallback(period=10)]</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> train_idx, test_idx <span class="kw">in</span> cv.split(X, y):</span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>    X_train, X_test <span class="op">=</span> X[train_idx], X[test_idx]</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>    y_train, y_test <span class="op">=</span> y[train_idx], y[test_idx]</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>    est, train_score, test_score <span class="op">=</span> fit_and_score(</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>        clone(clf), X_train, X_test, y_train, y_test</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>    results.append((est, train_score, test_score))</span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time.time()</span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>training_time <span class="op">=</span> end <span class="op">-</span> start</span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Training time: </span><span class="sc">{</span>training_time<span class="sc">}</span><span class="ss"> seconds</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Epoch 9, Evaluation log: 0.38247163136303425
Epoch 19, Evaluation log: 0.30883909496711565
Epoch 29, Evaluation log: 0.25891160415322517
Epoch 39, Evaluation log: 0.22431938641401938
Epoch 49, Evaluation log: 0.19906939988950034
Epoch 59, Evaluation log: 0.17557342481787783
Epoch 69, Evaluation log: 0.15741070637000668
Epoch 79, Evaluation log: 0.14500761325501663
Epoch 89, Evaluation log: 0.13356623626250075
Epoch 99, Evaluation log: 0.12425244349027707
Epoch 109, Evaluation log: 0.11549353853215871
Epoch 119, Evaluation log: 0.10753914446316776
Epoch 129, Evaluation log: 0.10075163258190788
Epoch 139, Evaluation log: 0.09508760424776119
Epoch 149, Evaluation log: 0.08952930686247691
Epoch 159, Evaluation log: 0.08478471879549579
Epoch 169, Evaluation log: 0.08038901584507425
Epoch 179, Evaluation log: 0.07650724647641505
Epoch 189, Evaluation log: 0.0727816475748408
Epoch 199, Evaluation log: 0.07032404982725074
Epoch 209, Evaluation log: 0.0678427000084697
Epoch 219, Evaluation log: 0.0648904362781841
Epoch 229, Evaluation log: 0.06248534968921541
Epoch 239, Evaluation log: 0.05987959807874176
Epoch 249, Evaluation log: 0.05791661974263278
Epoch 259, Evaluation log: 0.0556761164772064
Epoch 269, Evaluation log: 0.05445275821168657
Epoch 279, Evaluation log: 0.05328825594356387
Epoch 289, Evaluation log: 0.05223045989313057
Epoch 299, Evaluation log: 0.05058718744968543
Epoch 309, Evaluation log: 0.0494937293648126
Epoch 319, Evaluation log: 0.04759390164957674
Epoch 329, Evaluation log: 0.0462312260530376
Epoch 339, Evaluation log: 0.04548962091733191
Epoch 349, Evaluation log: 0.0445395356087957
Epoch 359, Evaluation log: 0.04392408714641852
Epoch 369, Evaluation log: 0.04325394862160327
Epoch 379, Evaluation log: 0.04280726971754601
Epoch 389, Evaluation log: 0.04183886580127059
Epoch 399, Evaluation log: 0.04121712694318231
Epoch 409, Evaluation log: 0.04053403911883435
Epoch 419, Evaluation log: 0.03995477157576405
Epoch 429, Evaluation log: 0.03936940546342854
Epoch 439, Evaluation log: 0.03903865462948969
Epoch 449, Evaluation log: 0.03875146185423191
Epoch 459, Evaluation log: 0.03825576012513987
Epoch 469, Evaluation log: 0.03789307707447202
Epoch 479, Evaluation log: 0.03758381873016799
Epoch 489, Evaluation log: 0.03722002731425085
Epoch 9, Evaluation log: 0.3839431093977764
Epoch 19, Evaluation log: 0.316803259925684
Epoch 29, Evaluation log: 0.2651792481521843
Epoch 39, Evaluation log: 0.22738066849124153
Epoch 49, Evaluation log: 0.20241713989035634
Epoch 59, Evaluation log: 0.18113894148425608
Epoch 69, Evaluation log: 0.16190695345837594
Epoch 79, Evaluation log: 0.1459297418361748
Epoch 89, Evaluation log: 0.13505328122454738
Epoch 99, Evaluation log: 0.12467433972935033
Epoch 109, Evaluation log: 0.11476937757397718
Epoch 119, Evaluation log: 0.10705844576631535
Epoch 129, Evaluation log: 0.1007427368335866
Epoch 139, Evaluation log: 0.09511455561227285
Epoch 149, Evaluation log: 0.08944775088880305
Epoch 159, Evaluation log: 0.0852270272843557
Epoch 169, Evaluation log: 0.08108753177426206
Epoch 179, Evaluation log: 0.07717907239086504
Epoch 189, Evaluation log: 0.07382146497023712
Epoch 199, Evaluation log: 0.07120286444045973
Epoch 209, Evaluation log: 0.06836501380605649
Epoch 219, Evaluation log: 0.06593221980235933
Epoch 229, Evaluation log: 0.06375260038006826
Epoch 239, Evaluation log: 0.06204788490321741
Epoch 249, Evaluation log: 0.06031528231051592
Epoch 259, Evaluation log: 0.05821218106828965
Epoch 269, Evaluation log: 0.05688165112041139
Epoch 279, Evaluation log: 0.05508955816978477
Epoch 289, Evaluation log: 0.05352331898263426
Epoch 299, Evaluation log: 0.05240563311037281
Epoch 309, Evaluation log: 0.05176925949486243
Epoch 319, Evaluation log: 0.05028374821030723
Epoch 329, Evaluation log: 0.04933697527826456
Epoch 339, Evaluation log: 0.0483200848169343
Epoch 349, Evaluation log: 0.04726855097347246
Epoch 359, Evaluation log: 0.04623301312328684
Epoch 369, Evaluation log: 0.04561931988285597
Epoch 379, Evaluation log: 0.04480456585380557
Epoch 389, Evaluation log: 0.04414834777336601
Epoch 399, Evaluation log: 0.04392664121410476
Epoch 409, Evaluation log: 0.04324779820138284
Epoch 419, Evaluation log: 0.0426144003916857
Epoch 429, Evaluation log: 0.04212930859639973
Epoch 439, Evaluation log: 0.04150663748630479
Epoch 449, Evaluation log: 0.04112776506838019
Epoch 459, Evaluation log: 0.0406414802535925
Epoch 469, Evaluation log: 0.04039199295942589
Epoch 479, Evaluation log: 0.03994675187682309
Epoch 489, Evaluation log: 0.03962944900992377
Epoch 9, Evaluation log: 0.37348533668275924
Epoch 19, Evaluation log: 0.3046779967616312
Epoch 29, Evaluation log: 0.25925737592263615
Epoch 39, Evaluation log: 0.22410386522312184
Epoch 49, Evaluation log: 0.2004010506790364
Epoch 59, Evaluation log: 0.17775708592764566
Epoch 69, Evaluation log: 0.15846302135464793
Epoch 79, Evaluation log: 0.14294425787671208
Epoch 89, Evaluation log: 0.13165269420624828
Epoch 99, Evaluation log: 0.12124356629239083
Epoch 109, Evaluation log: 0.11240943765514748
Epoch 119, Evaluation log: 0.1050099456749449
Epoch 129, Evaluation log: 0.09916633815011937
Epoch 139, Evaluation log: 0.09197318228063704
Epoch 149, Evaluation log: 0.08724289341161626
Epoch 159, Evaluation log: 0.08181075315717908
Epoch 169, Evaluation log: 0.07793788953881539
Epoch 179, Evaluation log: 0.0738678066787029
Epoch 189, Evaluation log: 0.07071311323592408
Epoch 199, Evaluation log: 0.06785277311144795
Epoch 209, Evaluation log: 0.06509117262769251
Epoch 219, Evaluation log: 0.06270335820498213
Epoch 229, Evaluation log: 0.05997682271549661
Epoch 239, Evaluation log: 0.05780157385005697
Epoch 249, Evaluation log: 0.05627155431241136
Epoch 259, Evaluation log: 0.05455188952394639
Epoch 269, Evaluation log: 0.05335250124903269
Epoch 279, Evaluation log: 0.05177403671947192
Epoch 289, Evaluation log: 0.0502992349827086
Epoch 299, Evaluation log: 0.04878120162451964
Epoch 309, Evaluation log: 0.04750042581515347
Epoch 319, Evaluation log: 0.04638965978969709
Epoch 329, Evaluation log: 0.0453384065455753
Epoch 339, Evaluation log: 0.04435587372527151
Epoch 349, Evaluation log: 0.04371002201556358
Epoch 359, Evaluation log: 0.04267427751428022
Epoch 369, Evaluation log: 0.04201858106802064
Epoch 379, Evaluation log: 0.04114477507341059
Epoch 389, Evaluation log: 0.04039302564610673
Epoch 399, Evaluation log: 0.03973206363263898
Epoch 409, Evaluation log: 0.03918391616855172
Epoch 419, Evaluation log: 0.0388662124943957
Epoch 429, Evaluation log: 0.03847300333745497
Epoch 439, Evaluation log: 0.0380393549977481
Epoch 449, Evaluation log: 0.03730691660773594
Epoch 459, Evaluation log: 0.03702111881968244
Epoch 469, Evaluation log: 0.03664693665586536
Epoch 479, Evaluation log: 0.03614641357609592
Epoch 489, Evaluation log: 0.0355336605892794
Epoch 9, Evaluation log: 0.3769457864481956
Epoch 19, Evaluation log: 0.308107710538432
Epoch 29, Evaluation log: 0.2611862540004076
Epoch 39, Evaluation log: 0.22194528283609544
Epoch 49, Evaluation log: 0.19869863549270667
Epoch 59, Evaluation log: 0.17677496181809693
Epoch 69, Evaluation log: 0.1588335537144885
Epoch 79, Evaluation log: 0.14423025232226064
Epoch 89, Evaluation log: 0.13216201160489435
Epoch 99, Evaluation log: 0.12169889870340193
Epoch 109, Evaluation log: 0.1137757607489366
Epoch 119, Evaluation log: 0.10604555474537573
Epoch 129, Evaluation log: 0.0994873592349386
Epoch 139, Evaluation log: 0.09312401082740734
Epoch 149, Evaluation log: 0.08770651690693194
Epoch 159, Evaluation log: 0.08347292025588718
Epoch 169, Evaluation log: 0.07946874758100853
Epoch 179, Evaluation log: 0.07439421177599478
Epoch 189, Evaluation log: 0.07203049524063647
Epoch 199, Evaluation log: 0.06918976012726683
Epoch 209, Evaluation log: 0.06745619420214768
Epoch 219, Evaluation log: 0.06412788211156863
Epoch 229, Evaluation log: 0.0621349887122783
Epoch 239, Evaluation log: 0.06049206964974817
Epoch 249, Evaluation log: 0.05785038131221296
Epoch 259, Evaluation log: 0.05583208470497682
Epoch 269, Evaluation log: 0.05437672443195849
Epoch 279, Evaluation log: 0.05296502465485851
Epoch 289, Evaluation log: 0.05152078793833382
Epoch 299, Evaluation log: 0.05024785394014221
Epoch 309, Evaluation log: 0.04945231355874114
Epoch 319, Evaluation log: 0.04804433621779339
Epoch 329, Evaluation log: 0.04648147120935184
Epoch 339, Evaluation log: 0.04579441847542242
Epoch 349, Evaluation log: 0.04491691003664874
Epoch 359, Evaluation log: 0.04373690498738476
Epoch 369, Evaluation log: 0.04302180119660257
Epoch 379, Evaluation log: 0.04263129232832263
Epoch 389, Evaluation log: 0.04227804737436229
Epoch 399, Evaluation log: 0.04162001935396698
Epoch 409, Evaluation log: 0.04073367187263532
Epoch 419, Evaluation log: 0.04045577921699257
Epoch 429, Evaluation log: 0.03975970771514342
Epoch 439, Evaluation log: 0.03960809067929816
Epoch 449, Evaluation log: 0.03917769643831882
Epoch 459, Evaluation log: 0.03878489302925228
Epoch 469, Evaluation log: 0.03843714174453418
Epoch 479, Evaluation log: 0.03813844806505952
Epoch 489, Evaluation log: 0.03778641245441142
Epoch 9, Evaluation log: 0.3783941830438562
Epoch 19, Evaluation log: 0.30222505612811074
Epoch 29, Evaluation log: 0.25763539372221567
Epoch 39, Evaluation log: 0.22342197418748402
Epoch 49, Evaluation log: 0.1961129531635088
Epoch 59, Evaluation log: 0.17787778443063143
Epoch 69, Evaluation log: 0.1588983331694617
Epoch 79, Evaluation log: 0.1447804333538661
Epoch 89, Evaluation log: 0.13302366530573637
Epoch 99, Evaluation log: 0.12258731623091444
Epoch 109, Evaluation log: 0.11318914428677818
Epoch 119, Evaluation log: 0.10711135420747268
Epoch 129, Evaluation log: 0.10036194257971329
Epoch 139, Evaluation log: 0.09493543367298207
Epoch 149, Evaluation log: 0.08982105537637744
Epoch 159, Evaluation log: 0.085427703416452
Epoch 169, Evaluation log: 0.08029012639213852
Epoch 179, Evaluation log: 0.0765718674413597
Epoch 189, Evaluation log: 0.07280729694384036
Epoch 199, Evaluation log: 0.07017471769924055
Epoch 209, Evaluation log: 0.06675714379087117
Epoch 219, Evaluation log: 0.06435183930956447
Epoch 229, Evaluation log: 0.06204230466204996
Epoch 239, Evaluation log: 0.05983427265596717
Epoch 249, Evaluation log: 0.05794039276605139
Epoch 259, Evaluation log: 0.05657029113038796
Epoch 269, Evaluation log: 0.05458827512370304
Epoch 279, Evaluation log: 0.053130550902169
Epoch 289, Evaluation log: 0.05193880843819029
Epoch 299, Evaluation log: 0.05098533582342936
Epoch 309, Evaluation log: 0.0493940681301468
Epoch 319, Evaluation log: 0.04851033938476222
Epoch 329, Evaluation log: 0.04743886737337446
Epoch 339, Evaluation log: 0.04658280349197113
Epoch 349, Evaluation log: 0.045829029025468
Epoch 359, Evaluation log: 0.04525945140120478
Epoch 369, Evaluation log: 0.04425408834898464
Epoch 379, Evaluation log: 0.04360489736326378
Epoch 389, Evaluation log: 0.04316306252079627
Epoch 399, Evaluation log: 0.04278075932533008
Epoch 409, Evaluation log: 0.04210342358255148
Epoch 419, Evaluation log: 0.04158380164940008
Epoch 429, Evaluation log: 0.04097901457186137
Epoch 439, Evaluation log: 0.04045562337559407
Epoch 449, Evaluation log: 0.04032690818932414
Epoch 459, Evaluation log: 0.0399386553731102
Epoch 469, Evaluation log: 0.03941659511990367
Epoch 479, Evaluation log: 0.03899142205826735
Epoch 489, Evaluation log: 0.0384332001006594

Training time: 3.1231930255889893 seconds
</code></pre>
</div>
</div>
<p><strong>Step 6</strong>: <em>To evaluate the performance of the XGBoost ranking model, we will use Stratified K-Fold Cross-Validation with 5 splits, ensuring each fold maintains the same class distribution as the original dataset. Using StratifiedKFold(n_splits=5, shuffle=True, random_state=94), the dataset will be divided into five folds. In each iteration, the model will be trained on four folds and evaluated on the remaining fold. A custom callback, CustomCallback(period=10), will print the evaluation log every 10 epochs.</em></p>
<p><em>The fit_and_score function will fit the model and score it on both the training and test sets, storing the results for each fold. This provides insight into the models performance across different subsets of the data, helps in understanding how well the model generalizes to unseen data and identifies potential overfitting or underfitting issues. The overall processing time for the cross-validation will also be recorded.</em></p>
<div id="e5482dec" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, (est, train_score, test_score) <span class="kw">in</span> <span class="bu">enumerate</span>(results):</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Fold </span><span class="sc">{</span>i<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss"> - Train Score: </span><span class="sc">{</span>train_score<span class="sc">:.4f}</span><span class="ss">, Test Score: </span><span class="sc">{</span>test_score<span class="sc">:.4f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Fold 1 - Train Score: 0.9992, Test Score: 0.9920
Fold 2 - Train Score: 0.9993, Test Score: 0.9908
Fold 3 - Train Score: 0.9993, Test Score: 0.9915
Fold 4 - Train Score: 0.9995, Test Score: 0.9915
Fold 5 - Train Score: 0.9994, Test Score: 0.9912</code></pre>
</div>
</div>
<p><em>Training the model on the entire dataset provides a final model that has learned from all available data. Recording the training time helps in understanding the computational efficiency and scalability of the model with the given hyperparameters.</em></p>
<div id="b405ac8a" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model on the entire dataset</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the XGBClassifier without early stopping here</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>clf <span class="op">=</span> xgb.XGBClassifier(</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    tree_method<span class="op">=</span><span class="st">"hist"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    max_depth<span class="op">=</span>best_trial_params[<span class="st">"max_depth"</span>],</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    min_child_weight<span class="op">=</span>best_trial_params[<span class="st">"min_child_weight"</span>],</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    gamma<span class="op">=</span>best_trial_params[<span class="st">"gamma"</span>],</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    subsample<span class="op">=</span>best_trial_params[<span class="st">"subsample"</span>],</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    colsample_bytree<span class="op">=</span>best_trial_params[<span class="st">"colsample_bytree"</span>],</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    learning_rate<span class="op">=</span>best_trial_params[<span class="st">"learning_rate"</span>],</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    n_estimators<span class="op">=</span>best_trial_params[<span class="st">"n_estimators"</span>],</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>clf.fit(X, y)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>end<span class="op">=</span> time.time()</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>modeling_time <span class="op">=</span> end <span class="op">-</span> start</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Training time: </span><span class="sc">{</span>modeling_time<span class="sc">}</span><span class="ss"> seconds</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Training time: 0.32645487785339355 seconds
</code></pre>
</div>
</div>
<p><em>Generating test schedules and calculating their objectives and rankings allows us to create a new dataset for evaluating the models performance on unseen data.</em></p>
<div id="56e8a128" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>num_test_schedules <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>test_schedules <span class="op">=</span> random_combination_with_replacement(T, N, num_test_schedules)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>test_neighbors <span class="op">=</span> create_neighbors_list(test_schedules)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Sampled: </span><span class="sc">{</span><span class="bu">len</span>(test_schedules)<span class="sc">}</span><span class="ss"> schedules</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>test_objectives_schedule_1 <span class="op">=</span> [calculate_objective(test_neighbor[<span class="dv">0</span>], s, d, q)[<span class="dv">0</span>] <span class="cf">for</span> test_neighbor <span class="kw">in</span> test_neighbors]</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Start time measeurement for the evaluation</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>test_objectives_schedule_2 <span class="op">=</span> [calculate_objective(test_neighbor[<span class="dv">1</span>], s, d, q)[<span class="dv">0</span>] <span class="cf">for</span> test_neighbor <span class="kw">in</span> test_neighbors]</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>test_rankings <span class="op">=</span> [<span class="dv">0</span> <span class="cf">if</span> test_obj <span class="op">&lt;</span> test_objectives_schedule_2[i] <span class="cf">else</span> <span class="dv">1</span> <span class="cf">for</span> i, test_obj <span class="kw">in</span> <span class="bu">enumerate</span>(test_objectives_schedule_1)]</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time.time()</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>evaluation_time <span class="op">=</span> end <span class="op">-</span> start</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the objectives for each pair for later processing</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>test_objectives <span class="op">=</span> [[test_obj, test_objectives_schedule_2[i]] <span class="cf">for</span> i, test_obj <span class="kw">in</span> <span class="bu">enumerate</span>(test_objectives_schedule_1)]</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Evaluation time: </span><span class="sc">{</span>evaluation_time<span class="sc">}</span><span class="ss"> seconds</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">6</span>):</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Neighbors: </span><span class="sc">{</span>test_neighbors[i]<span class="sc">}</span><span class="ss">,</span><span class="ch">\n</span><span class="ss">Objectives: </span><span class="sc">{</span>test_objectives[i]<span class="sc">}</span><span class="ss">, Ranking: </span><span class="sc">{</span>test_rankings[i]<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Total number of combinations: 51895935
Sampled: 1000 schedules


Evaluation time: 0.47791004180908203 seconds

Neighbors: ([4, 3, 3, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0], [3, 3, 3, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0]),
Objectives: [48.40501938853018, 32.607099352902864], Ranking: 1

Neighbors: ([5, 2, 1, 1, 2, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0], [5, 2, 0, 1, 2, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0]),
Objectives: [43.759717219472705, 36.89206532269476], Ranking: 1

Neighbors: ([5, 2, 2, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0], [5, 2, 2, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0]),
Objectives: [43.84592883469714, 43.799233367301944], Ranking: 1

Neighbors: ([5, 2, 2, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0], [5, 1, 2, 0, 2, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0]),
Objectives: [44.74318754312179, 36.02999428630489], Ranking: 1

Neighbors: ([5, 0, 1, 1, 1, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [5, 0, 1, 1, 1, 2, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]),
Objectives: [27.492704547223514, 24.95484792883403], Ranking: 1

Neighbors: ([7, 1, 2, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [7, 0, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
Objectives: [72.89801483197238, 60.414264042664364], Ranking: 1
</code></pre>
</div>
</div>
<p><em>Making predictions on new data and comparing them to the actual rankings provides an evaluation of the models performance in practical applications. Recording the prediction time helps in understanding the models efficiency during inference.</em></p>
<div id="e12797f1" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>input_X <span class="op">=</span> test_neighbors</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>X_new <span class="op">=</span> []</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> test_neighbor <span class="kw">in</span> input_X:</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    X_new.append(test_neighbor[<span class="dv">0</span>] <span class="op">+</span> test_neighbor[<span class="dv">1</span>])</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict the target for new data</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> clf.predict(X_new)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Probability estimates</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> time.time()</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>y_pred_proba <span class="op">=</span> clf.predict_proba(X_new)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> time.time()</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>prediction_time <span class="op">=</span> end <span class="op">-</span> start</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Prediction time: </span><span class="sc">{</span>prediction_time<span class="sc">}</span><span class="ss"> seconds</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"test_rankings = </span><span class="sc">{</span>np<span class="sc">.</span>array(test_rankings)[:<span class="dv">6</span>]<span class="sc">}</span><span class="ss">, </span><span class="ch">\n</span><span class="ss">y_pred = </span><span class="sc">{</span>y_pred[:<span class="dv">6</span>]<span class="sc">}</span><span class="ss">, </span><span class="ch">\n</span><span class="ss">y_pred_proba = </span><span class="ch">\n</span><span class="sc">{</span>y_pred_proba[:<span class="dv">6</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Prediction time: 0.005075931549072266 seconds

test_rankings = [1 1 1 1 1 1], 
y_pred = [1 1 1 1 1 1], 
y_pred_proba = 
[[1.1920929e-07 9.9999988e-01]
 [1.4652014e-03 9.9853480e-01]
 [5.2697659e-03 9.9473023e-01]
 [2.0772815e-03 9.9792272e-01]
 [5.2012205e-03 9.9479878e-01]
 [4.5244098e-03 9.9547559e-01]]</code></pre>
</div>
</div>
<p><em>Calculating the ambiguousness of the predicted probabilities helps in understanding the models confidence in its predictions. High ambiguousness indicates uncertain predictions, while low ambiguousness indicates confident predictions.</em></p>
<p><em>Calculating cumulative error rate and cumulative accuracy helps in understanding how the models performance evolves over the dataset.</em></p>
<p><em>Visualizing the relationship between ambiguousness and error provides insights into how uncertainty in the models predictions correlates with its accuracy. This can help in identifying patterns and understanding the conditions under which the model performs well or poorly.</em></p>
<div id="bbce449f" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functions <span class="im">import</span> calculate_ambiguousness</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>errors <span class="op">=</span> np.<span class="bu">abs</span>(y_pred <span class="op">-</span> np.array(test_rankings))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>ambiguousness: np.ndarray <span class="op">=</span> calculate_ambiguousness(y_pred_proba)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"Ambiguousness"</span>: ambiguousness, <span class="st">"Error"</span>: errors}).sort_values(by<span class="op">=</span><span class="st">"Ambiguousness"</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Cumulative error rate'</span>] <span class="op">=</span> df[<span class="st">'Error'</span>].expanding().mean()</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate cumulative accuracy</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Cumulative accuracy'</span>] <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> df[<span class="st">'Cumulative error rate'</span>]</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create traces</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(x<span class="op">=</span>df[<span class="st">"Ambiguousness"</span>], y<span class="op">=</span>df[<span class="st">"Error"</span>],</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>                    mode<span class="op">=</span><span class="st">"markers"</span>,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>                    name<span class="op">=</span><span class="st">"Error"</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>                    marker<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">9</span>)))</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(x<span class="op">=</span>df[<span class="st">"Ambiguousness"</span>], y<span class="op">=</span>df[<span class="st">"Cumulative accuracy"</span>],</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>                    mode<span class="op">=</span><span class="st">"lines"</span>,</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>                    name<span class="op">=</span><span class="st">"Cum. accuracy"</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>                    line <span class="op">=</span> <span class="bu">dict</span>(width <span class="op">=</span> <span class="dv">3</span>, dash <span class="op">=</span> <span class="st">'dash'</span>)))</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>fig.update_layout(title<span class="op">=</span><span class="ss">f"Error vs Ambiguousness&lt;/br&gt;&lt;/br&gt;&lt;sub&gt;n=</span><span class="sc">{</span>num_test_schedules<span class="sc">}</span><span class="ss">&lt;/sub&gt;"</span>,</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>                   xaxis_title<span class="op">=</span><span class="st">"Ambiguousness"</span>,</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>                   yaxis_title<span class="op">=</span><span class="st">"Error / Accuracy"</span>,</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>                   hoverlabel<span class="op">=</span><span class="bu">dict</span>(font<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>)))</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/witoldtenhove/Documents/Projects/vu/appointment-scheduling/book/functions.py:213: RuntimeWarning:

divide by zero encountered in log2

/Users/witoldtenhove/Documents/Projects/vu/appointment-scheduling/book/functions.py:213: RuntimeWarning:

invalid value encountered in multiply
</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>                            <div id="dff4a5b2-13f5-4f7f-a902-a34ef4bacbbe" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("dff4a5b2-13f5-4f7f-a902-a34ef4bacbbe")) {                    Plotly.newPlot(                        "dff4a5b2-13f5-4f7f-a902-a34ef4bacbbe",                        [{"marker":{"size":9},"mode":"markers","name":"Error","x":[2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.9172885004081763e-05,2.044934626610484e-05,2.044934626610484e-05,2.044934626610484e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.3905364287202246e-05,2.51779147220077e-05,2.51779147220077e-05,2.51779147220077e-05,2.51779147220077e-05,2.7515397960087284e-05,2.7515397960087284e-05,2.9837223337381147e-05,2.9837223337381147e-05,2.9837223337381147e-05,3.214470416423865e-05,3.443894092924893e-05,3.443894092924893e-05,3.6720877687912434e-05,3.6720877687912434e-05,3.6720877687912434e-05,3.899134389939718e-05,3.899134389939718e-05,3.899134389939718e-05,3.899134389939718e-05,4.1251052607549354e-05,4.1251052607549354e-05,4.35006404586602e-05,4.5740671339444816e-05,4.5740671339444816e-05,4.5740671339444816e-05,5.0194015784654766e-05,5.240819155005738e-05,5.6813420087564737e-05,5.6813420087564737e-05,5.6813420087564737e-05,6.118995952419937e-05,6.118995952419937e-05,6.336817750707269e-05,6.336817750707269e-05,6.554001447511837e-05,6.554001447511837e-05,6.986546941334382e-05,7.201950211310759e-05,7.431155245285481e-05,7.631109474459663e-05,7.631109474459663e-05,8.058181265369058e-05,8.058181265369058e-05,8.058181265369058e-05,8.270973921753466e-05,8.270973921753466e-05,8.483288547722623e-05,8.483288547722623e-05,9.328016312792897e-05,9.957115980796516e-05,9.957115980796516e-05,9.957115980796516e-05,0.00011204978363821283,0.00011411707964725792,0.00011824164539575577,0.00012029903155053034,0.00012029903155053034,0.00012146486551500857,0.00012272424646653235,0.0001264522725250572,0.0001284972531720996,0.0001284972531720996,0.00013664801372215152,0.00013664801372215152,0.00015281896048691124,0.0001548288855701685,0.0001548288855701685,0.00016084425442386419,0.00016284469165839255,0.00016484282969031483,0.0001708237687125802,0.00017678513540886343,0.00017876800848171115,0.000182727599167265,0.0001886518730316311,0.00019062268256675452,0.00019455852452665567,0.0002004481793846935,0.00020827552361879498,0.00021607476810459048,0.00021802033006679267,0.0002199642185587436,0.0002199642185587436,0.00022578603238798678,0.0002277234016219154,0.00023738661548122764,0.00023931462783366442,0.0002470117760822177,0.00024893239606171846,0.0002585139882285148,0.0002585139882285148,0.0002756743924692273,0.00028705596923828125,0.00029083984554745257,0.0003040454466827214,0.0003040454466827214,0.0003059272130485624,0.00032655245740897954,0.00032655245740897954,0.0003321545373182744,0.0003358839894644916,0.0003377471584826708,0.0003377471584826708,0.0003414703533053398,0.0003451894735917449,0.00035817481693811715,0.0003655735345091671,0.00037441172753460705,0.000374800554709509,0.0003766431473195553,0.0003784848377108574,0.00038400443736463785,0.00039318582275882363,0.00039318582275882363,0.0003992605197709054,0.0004035106976516545,0.0004206005251035094,0.00042424164712429047,0.0004278795968275517,0.0004351458337623626,0.0004460217314772308,0.00044726181658916175,0.00045687006786465645,0.00045687006786465645,0.0004748914507217705,0.00047668960178270936,0.0004946326371282339,0.0005232005496509373,0.0005241776816546917,0.0005427450523711741,0.0005445180577225983,0.0005462904809974134,0.0005480622639879584,0.0005498334649018943,0.0005498334649018943,0.0005622149910777807,0.0005728044779971242,0.0005851325113326311,0.0006079540471546352,0.000618455873336643,0.000630683614872396,0.000639402074739337,0.000641144230030477,0.0006568004610016942,0.0006568004610016942,0.0006672154413536191,0.0006724162958562374,0.0006914488039910793,0.0006966294022276998,0.0007018058095127344,0.0007155893836170435,0.0007173102349042892,0.0007823778432793915,0.0007925957906991243,0.0007993995677679777,0.000802799069788307,0.0008112907526083291,0.0008180770091712475,0.0008214677218347788,0.0008265509968623519,0.0008350152056664228,0.0008552903891541064,0.0008552903891541064,0.0008755117887631059,0.0009074221597984433,0.0009275106131099164,0.000937536358833313,0.0009775188518688083,0.0009825034067034721,0.0010092147858813405,0.0010371465468779206,0.0010371465468779206,0.0010635203216224909,0.0010684570297598839,0.0010701020946726203,0.0010816085850819945,0.0010969790164381266,0.0011340328492224216,0.001186176436021924,0.0012089044321328402,0.0012121471809223294,0.0012267271522432566,0.001246135332621634,0.00124775106087327,0.001263895072042942,0.0012719578808173537,0.0012767927255481482,0.0013025420485064387,0.001318478723987937,0.0013410535175353289,0.0013570612063631415,0.0013906043022871017,0.0014447090215981007,0.001481171348132193,0.0014985714806243777,0.00154432887211442,0.0015663596568629146,0.0015679318457841873,0.0015726473648101091,0.0015867832116782665,0.0016376436688005924,0.0016634813509881496,0.0016666025621816516,0.0016993327299132943,0.0017055582720786333,0.0017815978499129415,0.001829497516155243,0.0018309438601136208,0.0018510784721001983,0.0018864655867218971,0.001941688940860331,0.0019692271016538143,0.0020272056572139263,0.002054596319794655,0.002083459170535207,0.0021516182459890842,0.0021953980904072523,0.0022014279384166002,0.002205949043855071,0.0022104689851403236,0.002249591751024127,0.002266117837280035,0.002308114431798458,0.0023544970899820328,0.002376898191869259,0.002419385826215148,0.002422363730147481,0.002432782668620348,0.0024521173909306526,0.002464005723595619,0.0024788561277091503,0.0024788561277091503,0.0025100039783865213,0.0025114859454333782,0.002656182274222374,0.0026605951134115458,0.002681176643818617,0.0026943967677652836,0.002719345036894083,0.002788164187222719,0.002792549319565296,0.00286113191395998,0.0029309503734111786,0.0029562015552073717,0.00298461876809597,0.0030830565374344587,0.003098782617598772,0.0031621239613741636,0.003164998721331358,0.0031736220698803663,0.0031951661221683025,0.0032611144706606865,0.0032690390944480896,0.003316886257380247,0.0033711069263517857,0.003402454312890768,0.0034479552414268255,0.003476358251646161,0.003535908879712224,0.0035769371315836906,0.003589658997952938,0.0036418947856873274,0.003650355851277709,0.003665860975161195,0.0037235731724649668,0.003746061585843563,0.003776953089982271,0.0038134166970849037,0.0038372317794710398,0.0038764129858464003,0.0038889949209988117,0.0038917907513678074,0.003908556420356035,0.004019381944090128,0.004037464037537575,0.0040485854260623455,0.0040847016498446465,0.00414433516561985,0.004277041647583246,0.004409328103065491,0.004468175582587719,0.004611792508512735,0.00462323846295476,0.004766582511365414,0.0047710794024169445,0.004815868567675352,0.004856534767895937,0.00493974843993783,0.0049983602948486805,0.005090778693556786,0.005098850931972265,0.005117679480463266,0.005213015712797642,0.005258579738438129,0.005302750039845705,0.00535621726885438,0.005424275994300842,0.005446934141218662,0.005457592662423849,0.005558693781495094,0.005560022313147783,0.005619755480438471,0.005782348103821278,0.005814904347062111,0.005817543715238571,0.005963756237179041,0.005971462000161409,0.005982159171253443,0.006139561999589205,0.006181434262543917,0.006221957504749298,0.006371946539729834,0.006484415847808123,0.006494802888482809,0.006550590507686138,0.00657133013010025,0.006825894117355347,0.0069121429696679115,0.006977684795856476,0.007019403390586376,0.007023253012448549,0.0071360161527991295,0.007155347149819136,0.007284245453774929,0.007303379010409117,0.007346720434725285,0.0073479944840073586,0.007471427321434021,0.007674980442970991,0.007697756867855787,0.007772338576614857,0.00785437785089016,0.008251111954450607,0.008354495279490948,0.008460557088255882,0.008629203774034977,0.008688820526003838,0.009017424657940865,0.009145623072981834,0.009268621914088726,0.009323271922767162,0.009345363825559616,0.009413209743797779,0.009529135189950466,0.00972636230289936,0.009745117276906967,0.009765364229679108,0.00983234029263258,0.010019997134804726,0.010049207136034966,0.010055270045995712,0.010073457844555378,0.010144943371415138,0.010176420211791992,0.010285255499184132,0.010373997502028942,0.010412420146167278,0.011125890538096428,0.011387433856725693,0.011425444856286049,0.011676155030727386,0.011749478988349438,0.011891179718077183,0.011991968378424644,0.012046135030686855,0.012050624005496502,0.012089675292372704,0.01213083602488041,0.012144944630563259,0.012257116846740246,0.0122782401740551,0.012476140633225441,0.012619474902749062,0.012671355158090591,0.012898672372102737,0.013073594309389591,0.013139069080352783,0.013229483738541603,0.0136461416259408,0.013700864277780056,0.013841244392096996,0.014051929116249084,0.014077152125537395,0.014085175469517708,0.014216308481991291,0.014262069948017597,0.014416898600757122,0.014427172020077705,0.014604477211833,0.014630668796598911,0.014887047931551933,0.014919961802661419,0.015661191195249557,0.015819136053323746,0.015864050015807152,0.015864389017224312,0.01587752252817154,0.015906699001789093,0.0159145537763834,0.016010429710149765,0.01640743762254715,0.016411900520324707,0.01650102622807026,0.01671435870230198,0.016782736405730247,0.017186425626277924,0.017189744859933853,0.017317475751042366,0.017503347247838974,0.0176627766340971,0.01805293746292591,0.018121469765901566,0.018717089667916298,0.018900536000728607,0.019045647233724594,0.019541405141353607,0.01954307220876217,0.01964442804455757,0.01970074325799942,0.01973743923008442,0.019986417144536972,0.020035389810800552,0.020054757595062256,0.020110689103603363,0.020336275920271873,0.020610589534044266,0.020618723705410957,0.020823989063501358,0.021072641015052795,0.021105682477355003,0.021251186728477478,0.021504605188965797,0.021921714767813683,0.021962972357869148,0.022015318274497986,0.022415662184357643,0.02244112640619278,0.022664234042167664,0.0227435901761055,0.022822367027401924,0.022889558225870132,0.023291850462555885,0.023410502821207047,0.023652156814932823,0.023872073739767075,0.023948675021529198,0.024001533165574074,0.02421366609632969,0.02491331472992897,0.024944081902503967,0.025104165077209473,0.02535802125930786,0.02538236975669861,0.025666819885373116,0.025734545662999153,0.02605525031685829,0.026063531637191772,0.026212245225906372,0.02621931955218315,0.02628837153315544,0.02630573883652687,0.027417585253715515,0.027493586763739586,0.02761903777718544,0.027830926701426506,0.0279085636138916,0.028109820559620857,0.02817028947174549,0.028448624536395073,0.028500108048319817,0.02869027480483055,0.028772370889782906,0.028821732848882675,0.02908778376877308,0.029136331751942635,0.0292268767952919,0.029255881905555725,0.029616430401802063,0.029782915487885475,0.029815295711159706,0.03034025803208351,0.030412210151553154,0.031016269698739052,0.03125077486038208,0.03131144121289253,0.031838517636060715,0.0319889672100544,0.03229600191116333,0.032355278730392456,0.032469358295202255,0.032564278692007065,0.03310873359441757,0.03313164412975311,0.03316185995936394,0.03337174281477928,0.03457416221499443,0.03542039543390274,0.03588385879993439,0.0363113135099411,0.03637350723147392,0.03659791499376297,0.037138763815164566,0.03765420988202095,0.037810128182172775,0.0378817617893219,0.0381644107401371,0.03847012668848038,0.03877904638648033,0.03894168138504028,0.03896287456154823,0.039013247936964035,0.039664994925260544,0.04016900062561035,0.04034058749675751,0.04059884324669838,0.04139937460422516,0.041748907417058945,0.04192275553941727,0.04275272786617279,0.04317811131477356,0.04333135485649109,0.04376373067498207,0.04395517706871033,0.044037096202373505,0.04516766220331192,0.045917004346847534,0.04694554582238197,0.047173112630844116,0.04746442660689354,0.047815173864364624,0.048616673797369,0.051150768995285034,0.05145607888698578,0.0528094656765461,0.05290352553129196,0.053341083228588104,0.053346481174230576,0.053784728050231934,0.05667942389845848,0.05670362710952759,0.05674511939287186,0.05677061527967453,0.05731015279889107,0.05737912654876709,0.05823488160967827,0.061056867241859436,0.06253460049629211,0.06260465830564499,0.06303087621927261,0.06358714401721954,0.06365984678268433,0.06366404891014099,0.06502687931060791,0.06555509567260742,0.06690919399261475,0.06707613170146942,0.06764452904462814,0.06839419156312943,0.06841854006052017,0.06950657069683075,0.06982327252626419,0.07014456391334534,0.07019741088151932,0.07086313515901566,0.07168019562959671,0.07270877808332443,0.07275638729333878,0.0729224681854248,0.07292856276035309,0.07337353378534317,0.07341809570789337,0.07371176779270172,0.07421532273292542,0.07463783025741577,0.07513601332902908,0.07518111914396286,0.07523468136787415,0.07549790292978287,0.0756915956735611,0.07616857439279556,0.07629377394914627,0.07726464420557022,0.07790571451187134,0.07825223356485367,0.07982777059078217,0.0800238698720932,0.08137139678001404,0.08212342858314514,0.08399497717618942,0.08458837121725082,0.08547498285770416,0.08839534968137741,0.08842619508504868,0.09013005346059799,0.09261617064476013,0.09411773830652237,0.09501641243696213,0.09535558521747589,0.09580402076244354,0.09580979496240616,0.09644366800785065,0.0965949147939682,0.09661409258842468,0.09781275689601898,0.09884277731180191,0.09890100359916687,0.09917217493057251,0.10058403760194778,0.10147295892238617,0.10376428067684174,0.10427524894475937,0.10467857122421265,0.1048080176115036,0.10539774596691132,0.1054282933473587,0.10591129958629608,0.10595590621232986,0.10604164749383926,0.10756432265043259,0.1080859899520874,0.10860291123390198,0.10899530351161957,0.10999979823827744,0.11084189265966415,0.11128747463226318,0.11210073530673981,0.11240088194608688,0.11324693262577057,0.11369432508945465,0.11400148272514343,0.11740083992481232,0.11751018464565277,0.11930465698242188,0.12020107358694077,0.12024477869272232,0.12050974369049072,0.12289170920848846,0.12426338344812393,0.12654176354408264,0.12769010663032532,0.12838929891586304,0.12856638431549072,0.13269120454788208,0.13303275406360626,0.1347387135028839,0.13621890544891357,0.13649287819862366,0.13686281442642212,0.1373106986284256,0.13792507350444794,0.1384124457836151,0.14002040028572083,0.1417284905910492,0.14236177504062653,0.14251865446567535,0.14328014850616455,0.14542320370674133,0.14746761322021484,0.14882229268550873,0.1489969938993454,0.14975610375404358,0.1504705846309662,0.15072885155677795,0.15339945256710052,0.1542394757270813,0.15424983203411102,0.15601816773414612,0.156565323472023,0.15730880200862885,0.15748828649520874,0.15795202553272247,0.158167764544487,0.16025495529174805,0.1611301600933075,0.16198068857192993,0.16397912800312042,0.1647440791130066,0.16553029417991638,0.16699649393558502,0.1677812933921814,0.16778135299682617,0.17132580280303955,0.17504940927028656,0.17535454034805298,0.17562691867351532,0.17662395536899567,0.1781274527311325,0.17908833920955658,0.17957326769828796,0.18225854635238647,0.18423281610012054,0.18814526498317719,0.18844792246818542,0.1886214166879654,0.19166365265846252,0.19248796999454498,0.19278255105018616,0.19396249949932098,0.19396288692951202,0.19452613592147827,0.19841381907463074,0.20085643231868744,0.2017909586429596,0.20210933685302734,0.20500648021697998,0.2053726613521576,0.20552396774291992,0.20558054745197296,0.20639868080615997,0.210067018866539,0.2110416144132614,0.21120020747184753,0.21221603453159332,0.21308842301368713,0.21416765451431274,0.21480780839920044,0.21855400502681732,0.2207481563091278,0.22159212827682495,0.2217749059200287,0.22638151049613953,0.22740358114242554,0.22940056025981903,0.23049375414848328,0.23380334675312042,0.2350688874721527,0.23852241039276123,0.24035654962062836,0.24082915484905243,0.24166037142276764,0.2463017702102661,0.24716779589653015,0.24893082678318024,0.24980145692825317,0.25044938921928406,0.25189539790153503,0.2529531717300415,0.25527507066726685,0.2586463689804077,0.25874459743499756,0.2633052468299866,0.2662239372730255,0.26703283190727234,0.26887866854667664,0.2711953818798065,0.2722490131855011,0.2738780379295349,0.27472779154777527,0.27479392290115356,0.28185325860977173,0.28628963232040405,0.28727370500564575,0.28729164600372314,0.28888702392578125,0.28948602080345154,0.29188472032546997,0.30040013790130615,0.3040822148323059,0.3042844533920288,0.305794894695282,0.30606114864349365,0.30606526136398315,0.30853745341300964,0.3114182651042938,0.31146883964538574,0.311786413192749,0.31394633650779724,0.3141496479511261,0.31567543745040894,0.3165527582168579,0.3193996548652649,0.3210790455341339,0.3217017650604248,0.33006662130355835,0.33203357458114624,0.33418744802474976,0.3369949460029602,0.3374362587928772,0.3422698974609375,0.3488618731498718,0.3516242504119873,0.35345736145973206,0.35436156392097473,0.3550531268119812,0.35791587829589844,0.35813796520233154,0.3642488420009613,0.3656121492385864,0.3667251765727997,0.3692614436149597,0.3693457543849945,0.3726648986339569,0.37298184633255005,0.3749728798866272,0.37911632657051086,0.3805192708969116,0.3823273479938507,0.384202778339386,0.3963105082511902,0.3996439278125763,0.40313443541526794,0.4048360586166382,0.4057637155056,0.4120844006538391,0.4144503176212311,0.41827479004859924,0.42761853337287903,0.42837485671043396,0.4320136308670044,0.4329904317855835,0.43366703391075134,0.4348527789115906,0.43509286642074585,0.43847817182540894,0.4386540651321411,0.4488859474658966,0.45288699865341187,0.45668232440948486,0.47004151344299316,0.48238256573677063,0.4871405363082886,0.48889607191085815,0.4927017092704773,0.4951736330986023,0.4970771372318268,0.5030093789100647,0.5087153911590576,0.5133627653121948,0.5191830992698669,0.526146411895752,0.5386632084846497,0.5422345399856567,0.5489279627799988,0.5558964610099792,0.5594028234481812,0.5638374090194702,0.573966383934021,0.5742605924606323,0.5771927833557129,0.5847433805465698,0.6043106913566589,0.6103576421737671,0.6135222315788269,0.6182006597518921,0.6235409379005432,0.6257782578468323,0.6261242628097534,0.6402109861373901,0.6451315879821777,0.6521371603012085,0.6568767428398132,0.6598737835884094,0.6768943071365356,0.6819965839385986,0.6845747828483582,0.706492006778717,0.710891604423523,0.7256224751472473,0.7362972497940063,0.7367732524871826,0.7474634647369385,0.7475473880767822,0.7476235628128052,0.7486501336097717,0.7640663385391235,0.7695069313049316,0.7709164619445801,0.7769144773483276,0.7927219867706299,0.8369616270065308,0.866982102394104,0.8778020143508911,0.8900536298751831,0.9028258919715881,0.9093457460403442,0.9135005474090576,0.9399638772010803,0.9675382971763611,0.9792046546936035,0.9921789169311523,0.995783805847168,0.9959167242050171,0.9978368282318115,0.9984138011932373,0.9999990463256836,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"type":"scatter"},{"line":{"dash":"dash","width":3},"mode":"lines","name":"Cum. accuracy","x":[2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,2.913796379289124e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,5.589174179476686e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,8.174562026397325e-06,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.0701511200750247e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.3185003808757756e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.5633868315489963e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.8053935491479933e-05,1.9172885004081763e-05,2.044934626610484e-05,2.044934626610484e-05,2.044934626610484e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.2823205654276535e-05,2.3905364287202246e-05,2.51779147220077e-05,2.51779147220077e-05,2.51779147220077e-05,2.51779147220077e-05,2.7515397960087284e-05,2.7515397960087284e-05,2.9837223337381147e-05,2.9837223337381147e-05,2.9837223337381147e-05,3.214470416423865e-05,3.443894092924893e-05,3.443894092924893e-05,3.6720877687912434e-05,3.6720877687912434e-05,3.6720877687912434e-05,3.899134389939718e-05,3.899134389939718e-05,3.899134389939718e-05,3.899134389939718e-05,4.1251052607549354e-05,4.1251052607549354e-05,4.35006404586602e-05,4.5740671339444816e-05,4.5740671339444816e-05,4.5740671339444816e-05,5.0194015784654766e-05,5.240819155005738e-05,5.6813420087564737e-05,5.6813420087564737e-05,5.6813420087564737e-05,6.118995952419937e-05,6.118995952419937e-05,6.336817750707269e-05,6.336817750707269e-05,6.554001447511837e-05,6.554001447511837e-05,6.986546941334382e-05,7.201950211310759e-05,7.431155245285481e-05,7.631109474459663e-05,7.631109474459663e-05,8.058181265369058e-05,8.058181265369058e-05,8.058181265369058e-05,8.270973921753466e-05,8.270973921753466e-05,8.483288547722623e-05,8.483288547722623e-05,9.328016312792897e-05,9.957115980796516e-05,9.957115980796516e-05,9.957115980796516e-05,0.00011204978363821283,0.00011411707964725792,0.00011824164539575577,0.00012029903155053034,0.00012029903155053034,0.00012146486551500857,0.00012272424646653235,0.0001264522725250572,0.0001284972531720996,0.0001284972531720996,0.00013664801372215152,0.00013664801372215152,0.00015281896048691124,0.0001548288855701685,0.0001548288855701685,0.00016084425442386419,0.00016284469165839255,0.00016484282969031483,0.0001708237687125802,0.00017678513540886343,0.00017876800848171115,0.000182727599167265,0.0001886518730316311,0.00019062268256675452,0.00019455852452665567,0.0002004481793846935,0.00020827552361879498,0.00021607476810459048,0.00021802033006679267,0.0002199642185587436,0.0002199642185587436,0.00022578603238798678,0.0002277234016219154,0.00023738661548122764,0.00023931462783366442,0.0002470117760822177,0.00024893239606171846,0.0002585139882285148,0.0002585139882285148,0.0002756743924692273,0.00028705596923828125,0.00029083984554745257,0.0003040454466827214,0.0003040454466827214,0.0003059272130485624,0.00032655245740897954,0.00032655245740897954,0.0003321545373182744,0.0003358839894644916,0.0003377471584826708,0.0003377471584826708,0.0003414703533053398,0.0003451894735917449,0.00035817481693811715,0.0003655735345091671,0.00037441172753460705,0.000374800554709509,0.0003766431473195553,0.0003784848377108574,0.00038400443736463785,0.00039318582275882363,0.00039318582275882363,0.0003992605197709054,0.0004035106976516545,0.0004206005251035094,0.00042424164712429047,0.0004278795968275517,0.0004351458337623626,0.0004460217314772308,0.00044726181658916175,0.00045687006786465645,0.00045687006786465645,0.0004748914507217705,0.00047668960178270936,0.0004946326371282339,0.0005232005496509373,0.0005241776816546917,0.0005427450523711741,0.0005445180577225983,0.0005462904809974134,0.0005480622639879584,0.0005498334649018943,0.0005498334649018943,0.0005622149910777807,0.0005728044779971242,0.0005851325113326311,0.0006079540471546352,0.000618455873336643,0.000630683614872396,0.000639402074739337,0.000641144230030477,0.0006568004610016942,0.0006568004610016942,0.0006672154413536191,0.0006724162958562374,0.0006914488039910793,0.0006966294022276998,0.0007018058095127344,0.0007155893836170435,0.0007173102349042892,0.0007823778432793915,0.0007925957906991243,0.0007993995677679777,0.000802799069788307,0.0008112907526083291,0.0008180770091712475,0.0008214677218347788,0.0008265509968623519,0.0008350152056664228,0.0008552903891541064,0.0008552903891541064,0.0008755117887631059,0.0009074221597984433,0.0009275106131099164,0.000937536358833313,0.0009775188518688083,0.0009825034067034721,0.0010092147858813405,0.0010371465468779206,0.0010371465468779206,0.0010635203216224909,0.0010684570297598839,0.0010701020946726203,0.0010816085850819945,0.0010969790164381266,0.0011340328492224216,0.001186176436021924,0.0012089044321328402,0.0012121471809223294,0.0012267271522432566,0.001246135332621634,0.00124775106087327,0.001263895072042942,0.0012719578808173537,0.0012767927255481482,0.0013025420485064387,0.001318478723987937,0.0013410535175353289,0.0013570612063631415,0.0013906043022871017,0.0014447090215981007,0.001481171348132193,0.0014985714806243777,0.00154432887211442,0.0015663596568629146,0.0015679318457841873,0.0015726473648101091,0.0015867832116782665,0.0016376436688005924,0.0016634813509881496,0.0016666025621816516,0.0016993327299132943,0.0017055582720786333,0.0017815978499129415,0.001829497516155243,0.0018309438601136208,0.0018510784721001983,0.0018864655867218971,0.001941688940860331,0.0019692271016538143,0.0020272056572139263,0.002054596319794655,0.002083459170535207,0.0021516182459890842,0.0021953980904072523,0.0022014279384166002,0.002205949043855071,0.0022104689851403236,0.002249591751024127,0.002266117837280035,0.002308114431798458,0.0023544970899820328,0.002376898191869259,0.002419385826215148,0.002422363730147481,0.002432782668620348,0.0024521173909306526,0.002464005723595619,0.0024788561277091503,0.0024788561277091503,0.0025100039783865213,0.0025114859454333782,0.002656182274222374,0.0026605951134115458,0.002681176643818617,0.0026943967677652836,0.002719345036894083,0.002788164187222719,0.002792549319565296,0.00286113191395998,0.0029309503734111786,0.0029562015552073717,0.00298461876809597,0.0030830565374344587,0.003098782617598772,0.0031621239613741636,0.003164998721331358,0.0031736220698803663,0.0031951661221683025,0.0032611144706606865,0.0032690390944480896,0.003316886257380247,0.0033711069263517857,0.003402454312890768,0.0034479552414268255,0.003476358251646161,0.003535908879712224,0.0035769371315836906,0.003589658997952938,0.0036418947856873274,0.003650355851277709,0.003665860975161195,0.0037235731724649668,0.003746061585843563,0.003776953089982271,0.0038134166970849037,0.0038372317794710398,0.0038764129858464003,0.0038889949209988117,0.0038917907513678074,0.003908556420356035,0.004019381944090128,0.004037464037537575,0.0040485854260623455,0.0040847016498446465,0.00414433516561985,0.004277041647583246,0.004409328103065491,0.004468175582587719,0.004611792508512735,0.00462323846295476,0.004766582511365414,0.0047710794024169445,0.004815868567675352,0.004856534767895937,0.00493974843993783,0.0049983602948486805,0.005090778693556786,0.005098850931972265,0.005117679480463266,0.005213015712797642,0.005258579738438129,0.005302750039845705,0.00535621726885438,0.005424275994300842,0.005446934141218662,0.005457592662423849,0.005558693781495094,0.005560022313147783,0.005619755480438471,0.005782348103821278,0.005814904347062111,0.005817543715238571,0.005963756237179041,0.005971462000161409,0.005982159171253443,0.006139561999589205,0.006181434262543917,0.006221957504749298,0.006371946539729834,0.006484415847808123,0.006494802888482809,0.006550590507686138,0.00657133013010025,0.006825894117355347,0.0069121429696679115,0.006977684795856476,0.007019403390586376,0.007023253012448549,0.0071360161527991295,0.007155347149819136,0.007284245453774929,0.007303379010409117,0.007346720434725285,0.0073479944840073586,0.007471427321434021,0.007674980442970991,0.007697756867855787,0.007772338576614857,0.00785437785089016,0.008251111954450607,0.008354495279490948,0.008460557088255882,0.008629203774034977,0.008688820526003838,0.009017424657940865,0.009145623072981834,0.009268621914088726,0.009323271922767162,0.009345363825559616,0.009413209743797779,0.009529135189950466,0.00972636230289936,0.009745117276906967,0.009765364229679108,0.00983234029263258,0.010019997134804726,0.010049207136034966,0.010055270045995712,0.010073457844555378,0.010144943371415138,0.010176420211791992,0.010285255499184132,0.010373997502028942,0.010412420146167278,0.011125890538096428,0.011387433856725693,0.011425444856286049,0.011676155030727386,0.011749478988349438,0.011891179718077183,0.011991968378424644,0.012046135030686855,0.012050624005496502,0.012089675292372704,0.01213083602488041,0.012144944630563259,0.012257116846740246,0.0122782401740551,0.012476140633225441,0.012619474902749062,0.012671355158090591,0.012898672372102737,0.013073594309389591,0.013139069080352783,0.013229483738541603,0.0136461416259408,0.013700864277780056,0.013841244392096996,0.014051929116249084,0.014077152125537395,0.014085175469517708,0.014216308481991291,0.014262069948017597,0.014416898600757122,0.014427172020077705,0.014604477211833,0.014630668796598911,0.014887047931551933,0.014919961802661419,0.015661191195249557,0.015819136053323746,0.015864050015807152,0.015864389017224312,0.01587752252817154,0.015906699001789093,0.0159145537763834,0.016010429710149765,0.01640743762254715,0.016411900520324707,0.01650102622807026,0.01671435870230198,0.016782736405730247,0.017186425626277924,0.017189744859933853,0.017317475751042366,0.017503347247838974,0.0176627766340971,0.01805293746292591,0.018121469765901566,0.018717089667916298,0.018900536000728607,0.019045647233724594,0.019541405141353607,0.01954307220876217,0.01964442804455757,0.01970074325799942,0.01973743923008442,0.019986417144536972,0.020035389810800552,0.020054757595062256,0.020110689103603363,0.020336275920271873,0.020610589534044266,0.020618723705410957,0.020823989063501358,0.021072641015052795,0.021105682477355003,0.021251186728477478,0.021504605188965797,0.021921714767813683,0.021962972357869148,0.022015318274497986,0.022415662184357643,0.02244112640619278,0.022664234042167664,0.0227435901761055,0.022822367027401924,0.022889558225870132,0.023291850462555885,0.023410502821207047,0.023652156814932823,0.023872073739767075,0.023948675021529198,0.024001533165574074,0.02421366609632969,0.02491331472992897,0.024944081902503967,0.025104165077209473,0.02535802125930786,0.02538236975669861,0.025666819885373116,0.025734545662999153,0.02605525031685829,0.026063531637191772,0.026212245225906372,0.02621931955218315,0.02628837153315544,0.02630573883652687,0.027417585253715515,0.027493586763739586,0.02761903777718544,0.027830926701426506,0.0279085636138916,0.028109820559620857,0.02817028947174549,0.028448624536395073,0.028500108048319817,0.02869027480483055,0.028772370889782906,0.028821732848882675,0.02908778376877308,0.029136331751942635,0.0292268767952919,0.029255881905555725,0.029616430401802063,0.029782915487885475,0.029815295711159706,0.03034025803208351,0.030412210151553154,0.031016269698739052,0.03125077486038208,0.03131144121289253,0.031838517636060715,0.0319889672100544,0.03229600191116333,0.032355278730392456,0.032469358295202255,0.032564278692007065,0.03310873359441757,0.03313164412975311,0.03316185995936394,0.03337174281477928,0.03457416221499443,0.03542039543390274,0.03588385879993439,0.0363113135099411,0.03637350723147392,0.03659791499376297,0.037138763815164566,0.03765420988202095,0.037810128182172775,0.0378817617893219,0.0381644107401371,0.03847012668848038,0.03877904638648033,0.03894168138504028,0.03896287456154823,0.039013247936964035,0.039664994925260544,0.04016900062561035,0.04034058749675751,0.04059884324669838,0.04139937460422516,0.041748907417058945,0.04192275553941727,0.04275272786617279,0.04317811131477356,0.04333135485649109,0.04376373067498207,0.04395517706871033,0.044037096202373505,0.04516766220331192,0.045917004346847534,0.04694554582238197,0.047173112630844116,0.04746442660689354,0.047815173864364624,0.048616673797369,0.051150768995285034,0.05145607888698578,0.0528094656765461,0.05290352553129196,0.053341083228588104,0.053346481174230576,0.053784728050231934,0.05667942389845848,0.05670362710952759,0.05674511939287186,0.05677061527967453,0.05731015279889107,0.05737912654876709,0.05823488160967827,0.061056867241859436,0.06253460049629211,0.06260465830564499,0.06303087621927261,0.06358714401721954,0.06365984678268433,0.06366404891014099,0.06502687931060791,0.06555509567260742,0.06690919399261475,0.06707613170146942,0.06764452904462814,0.06839419156312943,0.06841854006052017,0.06950657069683075,0.06982327252626419,0.07014456391334534,0.07019741088151932,0.07086313515901566,0.07168019562959671,0.07270877808332443,0.07275638729333878,0.0729224681854248,0.07292856276035309,0.07337353378534317,0.07341809570789337,0.07371176779270172,0.07421532273292542,0.07463783025741577,0.07513601332902908,0.07518111914396286,0.07523468136787415,0.07549790292978287,0.0756915956735611,0.07616857439279556,0.07629377394914627,0.07726464420557022,0.07790571451187134,0.07825223356485367,0.07982777059078217,0.0800238698720932,0.08137139678001404,0.08212342858314514,0.08399497717618942,0.08458837121725082,0.08547498285770416,0.08839534968137741,0.08842619508504868,0.09013005346059799,0.09261617064476013,0.09411773830652237,0.09501641243696213,0.09535558521747589,0.09580402076244354,0.09580979496240616,0.09644366800785065,0.0965949147939682,0.09661409258842468,0.09781275689601898,0.09884277731180191,0.09890100359916687,0.09917217493057251,0.10058403760194778,0.10147295892238617,0.10376428067684174,0.10427524894475937,0.10467857122421265,0.1048080176115036,0.10539774596691132,0.1054282933473587,0.10591129958629608,0.10595590621232986,0.10604164749383926,0.10756432265043259,0.1080859899520874,0.10860291123390198,0.10899530351161957,0.10999979823827744,0.11084189265966415,0.11128747463226318,0.11210073530673981,0.11240088194608688,0.11324693262577057,0.11369432508945465,0.11400148272514343,0.11740083992481232,0.11751018464565277,0.11930465698242188,0.12020107358694077,0.12024477869272232,0.12050974369049072,0.12289170920848846,0.12426338344812393,0.12654176354408264,0.12769010663032532,0.12838929891586304,0.12856638431549072,0.13269120454788208,0.13303275406360626,0.1347387135028839,0.13621890544891357,0.13649287819862366,0.13686281442642212,0.1373106986284256,0.13792507350444794,0.1384124457836151,0.14002040028572083,0.1417284905910492,0.14236177504062653,0.14251865446567535,0.14328014850616455,0.14542320370674133,0.14746761322021484,0.14882229268550873,0.1489969938993454,0.14975610375404358,0.1504705846309662,0.15072885155677795,0.15339945256710052,0.1542394757270813,0.15424983203411102,0.15601816773414612,0.156565323472023,0.15730880200862885,0.15748828649520874,0.15795202553272247,0.158167764544487,0.16025495529174805,0.1611301600933075,0.16198068857192993,0.16397912800312042,0.1647440791130066,0.16553029417991638,0.16699649393558502,0.1677812933921814,0.16778135299682617,0.17132580280303955,0.17504940927028656,0.17535454034805298,0.17562691867351532,0.17662395536899567,0.1781274527311325,0.17908833920955658,0.17957326769828796,0.18225854635238647,0.18423281610012054,0.18814526498317719,0.18844792246818542,0.1886214166879654,0.19166365265846252,0.19248796999454498,0.19278255105018616,0.19396249949932098,0.19396288692951202,0.19452613592147827,0.19841381907463074,0.20085643231868744,0.2017909586429596,0.20210933685302734,0.20500648021697998,0.2053726613521576,0.20552396774291992,0.20558054745197296,0.20639868080615997,0.210067018866539,0.2110416144132614,0.21120020747184753,0.21221603453159332,0.21308842301368713,0.21416765451431274,0.21480780839920044,0.21855400502681732,0.2207481563091278,0.22159212827682495,0.2217749059200287,0.22638151049613953,0.22740358114242554,0.22940056025981903,0.23049375414848328,0.23380334675312042,0.2350688874721527,0.23852241039276123,0.24035654962062836,0.24082915484905243,0.24166037142276764,0.2463017702102661,0.24716779589653015,0.24893082678318024,0.24980145692825317,0.25044938921928406,0.25189539790153503,0.2529531717300415,0.25527507066726685,0.2586463689804077,0.25874459743499756,0.2633052468299866,0.2662239372730255,0.26703283190727234,0.26887866854667664,0.2711953818798065,0.2722490131855011,0.2738780379295349,0.27472779154777527,0.27479392290115356,0.28185325860977173,0.28628963232040405,0.28727370500564575,0.28729164600372314,0.28888702392578125,0.28948602080345154,0.29188472032546997,0.30040013790130615,0.3040822148323059,0.3042844533920288,0.305794894695282,0.30606114864349365,0.30606526136398315,0.30853745341300964,0.3114182651042938,0.31146883964538574,0.311786413192749,0.31394633650779724,0.3141496479511261,0.31567543745040894,0.3165527582168579,0.3193996548652649,0.3210790455341339,0.3217017650604248,0.33006662130355835,0.33203357458114624,0.33418744802474976,0.3369949460029602,0.3374362587928772,0.3422698974609375,0.3488618731498718,0.3516242504119873,0.35345736145973206,0.35436156392097473,0.3550531268119812,0.35791587829589844,0.35813796520233154,0.3642488420009613,0.3656121492385864,0.3667251765727997,0.3692614436149597,0.3693457543849945,0.3726648986339569,0.37298184633255005,0.3749728798866272,0.37911632657051086,0.3805192708969116,0.3823273479938507,0.384202778339386,0.3963105082511902,0.3996439278125763,0.40313443541526794,0.4048360586166382,0.4057637155056,0.4120844006538391,0.4144503176212311,0.41827479004859924,0.42761853337287903,0.42837485671043396,0.4320136308670044,0.4329904317855835,0.43366703391075134,0.4348527789115906,0.43509286642074585,0.43847817182540894,0.4386540651321411,0.4488859474658966,0.45288699865341187,0.45668232440948486,0.47004151344299316,0.48238256573677063,0.4871405363082886,0.48889607191085815,0.4927017092704773,0.4951736330986023,0.4970771372318268,0.5030093789100647,0.5087153911590576,0.5133627653121948,0.5191830992698669,0.526146411895752,0.5386632084846497,0.5422345399856567,0.5489279627799988,0.5558964610099792,0.5594028234481812,0.5638374090194702,0.573966383934021,0.5742605924606323,0.5771927833557129,0.5847433805465698,0.6043106913566589,0.6103576421737671,0.6135222315788269,0.6182006597518921,0.6235409379005432,0.6257782578468323,0.6261242628097534,0.6402109861373901,0.6451315879821777,0.6521371603012085,0.6568767428398132,0.6598737835884094,0.6768943071365356,0.6819965839385986,0.6845747828483582,0.706492006778717,0.710891604423523,0.7256224751472473,0.7362972497940063,0.7367732524871826,0.7474634647369385,0.7475473880767822,0.7476235628128052,0.7486501336097717,0.7640663385391235,0.7695069313049316,0.7709164619445801,0.7769144773483276,0.7927219867706299,0.8369616270065308,0.866982102394104,0.8778020143508911,0.8900536298751831,0.9028258919715881,0.9093457460403442,0.9135005474090576,0.9399638772010803,0.9675382971763611,0.9792046546936035,0.9921789169311523,0.995783805847168,0.9959167242050171,0.9978368282318115,0.9984138011932373,0.9999990463256836,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"y":[1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.9988851727982163,0.9988864142538976,0.9988876529477196,0.9988888888888889,0.9988901220865705,0.9988913525498891,0.9988925802879292,0.9988938053097345,0.9988950276243094,0.9988962472406181,0.9988974641675854,0.998898678414097,0.9988998899889989,0.9989010989010989,0.9989023051591658,0.9989035087719298,0.9989047097480832,0.9989059080962801,0.9989071038251366,0.9989082969432315,0.9989094874591058,0.9989106753812637,0.998911860718172,0.9989130434782608,0.998914223669924,0.9989154013015185,0.9989165763813651,0.9989177489177489,0.9989189189189189,0.9989200863930886,0.9989212513484358,0.9989224137931034,0.9989235737351991,0.9989247311827957,0.9989258861439313,0.9989270386266095,0.9989281886387996,0.9989293361884368,0.9989304812834224,0.9989316239316239,0.9989327641408752,0.9989339019189766,0.9989350372736954,0.9989361702127659,0.9989373007438895,0.9989384288747346,0.9989395546129375,0.9989406779661016,0.9989417989417989,0.9989429175475687,0.9989440337909187,0.9989451476793249,0.9989462592202318,0.9989473684210526,0.9989484752891693,0.9989495798319328,0.9989506820566632,0.9989517819706499,0.9989528795811519,0.9989539748953975,0.9979101358411703,0.9979123173277662,0.9979144942648592,0.9979166666666667,0.9979188345473465,0.997920997920998,0.9979231568016614,0.9968879668049793,0.9968911917098445,0.9968944099378882,0.9968976215098242,0.996900826446281,0.9969040247678018,0.9969072164948454,0.9969104016477858,0.9958847736625515,0.9948612538540597,0.9938398357289527,0.9938461538461538,0.9938524590163934,0.9938587512794268,0.9938650306748467,0.9938712972420838,0.9938775510204082,0.9938837920489296,0.9938900203665988,0.9938962360122076,0.9939024390243902,0.9939086294416244,0.9939148073022313,0.993920972644377,0.9939271255060729,0.993933265925177,0.9939393939393939,0.9939455095862765,0.9939516129032258,0.9939577039274925,0.993963782696177,0.9939698492462311,0.9939759036144579,0.9939819458375125,0.9939879759519038,0.993993993993994,0.994],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"hoverlabel":{"font":{"color":"white"}},"title":{"text":"Error vs Ambiguousness\u003c\u002fbr\u003e\u003c\u002fbr\u003e\u003csub\u003en=1000\u003c\u002fsub\u003e"},"xaxis":{"title":{"text":"Ambiguousness"}},"yaxis":{"title":{"text":"Error \u002f Accuracy"}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('dff4a5b2-13f5-4f7f-a902-a34ef4bacbbe');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
</section>
<section id="results" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="results"><span class="header-section-number">2.5</span> Results</h2>
<p><strong>Results</strong>: <em>We wanted to test whether an XGBoost classification model could be used to assess and rank the quality of pairs of schedules. For performance benchmarking we use the conventional calculation method using Lindley recursions.</em></p>
<p><em>We trained the XGBoost ranking model using a limited set of features (schedules) and labels (objectives). The total number of possible schedules is approximately 52.0 million. For training and validation, we used a sample of 20000 schedules. Generating the feature and label set took a total of 8.9471 seconds, with the calculation of objective values accounting for 8.6249 seconds.</em></p>
<p><em>The model demonstrates strong and consistent performance with high accuracies both for training as well as testing, good generalization and stability. Total training time for the final model was 0.3265 seconds. The evaluation of 1000 test schedules took 0.0051 seconds for the the XGBoost model and 0.4779 for the conventional method, which is an improvement of 94X.</em></p>
</section>
<section id="discussion" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="discussion"><span class="header-section-number">2.6</span> Discussion</h2>
<p><strong>Discussion Points</strong>: <em>In this experiment we used total waiting time as the objective value. In conventional appointment schedule problems the objective function also includes the physicians idle time and overtime.</em></p>
</section>
<section id="timeline" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="timeline"><span class="header-section-number">2.7</span> Timeline</h2>
<p><strong>Timeline</strong>: <em>This experiment was started on 25-07-2024</em></p>
</section>
<section id="references" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="references"><span class="header-section-number">2.8</span> References</h2>
<p><strong>References</strong>: <em>List any references or sources cited in this report.</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>